<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
    <id>https://shekhar-patil.github.io/blog</id>
    <title>Shekhar Patil - Full Stack Developer Blog</title>
    <updated>2025-05-30T00:00:00.000Z</updated>
    <generator>https://github.com/jpmonette/feed</generator>
    <link rel="alternate" href="https://shekhar-patil.github.io/blog"/>
    <subtitle>Shekhar Patil - Full Stack Developer Blog</subtitle>
    <icon>https://shekhar-patil.github.io/img/favicon.ico</icon>
    <entry>
        <title type="html"><![CDATA[How to Terminate Goroutines in Go]]></title>
        <id>https://shekhar-patil.github.io/blog/terminate-goroutines</id>
        <link href="https://shekhar-patil.github.io/blog/terminate-goroutines"/>
        <updated>2025-05-30T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[This week, I explored goroutines in more depth, particularly focusing on how to terminate them gracefully.]]></summary>
        <content type="html"><![CDATA[<p>This week, I explored goroutines in more depth, particularly focusing on how to terminate them gracefully.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="how-to-terminate-goroutines-in-go">How to Terminate Goroutines in Go?<a href="https://shekhar-patil.github.io/blog/terminate-goroutines#how-to-terminate-goroutines-in-go" class="hash-link" aria-label="Direct link to How to Terminate Goroutines in Go?" title="Direct link to How to Terminate Goroutines in Go?">​</a></h3>
<p>In Go, goroutines cannot be forcefully killed. Instead, they should be terminated <strong>gracefully and in a controlled manner</strong>.</p>
<p>You can achieve this using mechanisms such as <strong>channels</strong>, <strong>context</strong>, or a <strong>shared flag</strong>. Among these, using <code>context</code> is the most recommended and idiomatic way.</p>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="method-1-using-contextcontext">Method 1: Using <code>context.Context</code><a href="https://shekhar-patil.github.io/blog/terminate-goroutines#method-1-using-contextcontext" class="hash-link" aria-label="Direct link to method-1-using-contextcontext" title="Direct link to method-1-using-contextcontext">​</a></h3>
<p>Use <code>context.WithCancel</code> when you want to manually signal cancellation. When <code>cancel()</code> is called, all goroutines observing that context will receive a signal via <code>&lt;-ctx.Done()</code>.</p>
<div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">package</span><span class="token plain"> main</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">"context"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">"fmt"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">"sync"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">"time"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">func</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">worker</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ctx context</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Context</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> wg </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">sync</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">WaitGroup</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">defer</span><span class="token plain"> wg</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Done</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">select</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">case</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;-</span><span class="token plain">ctx</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Done</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            fmt</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Println</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"Worker cancelled:"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> ctx</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Err</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">default</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            fmt</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Println</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"Working..."</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            time</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Sleep</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">500</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> time</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Millisecond</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">func</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">main</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ctx</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> cancel </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> context</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">WithCancel</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">context</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Background</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">var</span><span class="token plain"> wg sync</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">WaitGroup</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    wg</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Add</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">go</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">worker</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ctx</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">wg</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    time</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Sleep</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">2</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> time</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Second</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">cancel</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    wg</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Wait</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fmt</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Println</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"All workers done"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div>
<hr>
<p>You can also use other context-based methods:</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="contextwithtimeoutparent-context-timeout-timeduration"><code>context.WithTimeout(parent Context, timeout time.Duration)</code><a href="https://shekhar-patil.github.io/blog/terminate-goroutines#contextwithtimeoutparent-context-timeout-timeduration" class="hash-link" aria-label="Direct link to contextwithtimeoutparent-context-timeout-timeduration" title="Direct link to contextwithtimeoutparent-context-timeout-timeduration">​</a></h4>
<p>This automatically cancels the context after the specified duration.</p>
<div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ctx</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> cancel </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> context</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">WithTimeout</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">context</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Background</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token operator" style="color:#393A34">*</span><span class="token plain">time</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Second</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">defer</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">cancel</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">go</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">func</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ctx context</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Context</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token operator" style="color:#393A34">&lt;-</span><span class="token plain">ctx</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Done</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fmt</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Println</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"Timed out:"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> ctx</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Err</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// Prints after 2 seconds</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ctx</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="contextwithdeadlineparent-context-deadline-timetime"><code>context.WithDeadline(parent Context, deadline time.Time)</code><a href="https://shekhar-patil.github.io/blog/terminate-goroutines#contextwithdeadlineparent-context-deadline-timetime" class="hash-link" aria-label="Direct link to contextwithdeadlineparent-context-deadline-timetime" title="Direct link to contextwithdeadlineparent-context-deadline-timetime">​</a></h4>
<p>This cancels the context at a specific time. It's similar to <code>WithTimeout</code>, but instead of a duration, you provide an exact deadline.</p>
<div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">deadline </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> time</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Now</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Add</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">3</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> time</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Second</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ctx</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> cancel </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> context</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">WithDeadline</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">context</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Background</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> deadline</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">defer</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">cancel</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">go</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">func</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ctx context</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Context</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token operator" style="color:#393A34">&lt;-</span><span class="token plain">ctx</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Done</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fmt</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Println</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"Deadline reached:"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> ctx</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Err</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ctx</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="method-2-using-channels-to-signal-termination">Method 2: Using Channels to Signal Termination<a href="https://shekhar-patil.github.io/blog/terminate-goroutines#method-2-using-channels-to-signal-termination" class="hash-link" aria-label="Direct link to Method 2: Using Channels to Signal Termination" title="Direct link to Method 2: Using Channels to Signal Termination">​</a></h3>
<p>This is another clean and idiomatic approach in Go.</p>
<div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">package</span><span class="token plain"> main</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">"fmt"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">"sync"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">"time"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">func</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">worker</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ch </span><span class="token keyword" style="color:#00009f">chan</span><span class="token plain"> </span><span class="token builtin">bool</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> wg </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">sync</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">WaitGroup</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">defer</span><span class="token plain"> wg</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Done</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">select</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">case</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;-</span><span class="token plain">ch</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            fmt</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Println</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"Worker cancelled"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">default</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            fmt</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Println</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"Working..."</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            time</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Sleep</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">500</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> time</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Millisecond</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">func</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">main</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ch </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">make</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">chan</span><span class="token plain"> </span><span class="token builtin">bool</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">var</span><span class="token plain"> wg sync</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">WaitGroup</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    wg</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Add</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">go</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">worker</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ch</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">wg</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    time</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Sleep</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">2</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> time</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Second</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ch </span><span class="token operator" style="color:#393A34">&lt;-</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    wg</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Wait</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="method-3-using-a-shared-variable-not-recommended">Method 3: Using a Shared Variable (Not Recommended)<a href="https://shekhar-patil.github.io/blog/terminate-goroutines#method-3-using-a-shared-variable-not-recommended" class="hash-link" aria-label="Direct link to Method 3: Using a Shared Variable (Not Recommended)" title="Direct link to Method 3: Using a Shared Variable (Not Recommended)">​</a></h3>
<p>While possible, this method is generally discouraged unless necessary, as it can be prone to race conditions if not handled properly.</p>
<div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">package</span><span class="token plain"> main</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">"fmt"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">"sync"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">"sync/atomic"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">"time"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">func</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">worker</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">stop </span><span class="token operator" style="color:#393A34">*</span><span class="token builtin">int32</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> wg </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">sync</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">WaitGroup</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">defer</span><span class="token plain"> wg</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Done</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> atomic</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">LoadInt32</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">stop</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            fmt</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Println</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"Worker cancelled."</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        fmt</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Println</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"Working..."</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        time</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Sleep</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">500</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> time</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Millisecond</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">func</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">main</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">var</span><span class="token plain"> stop </span><span class="token builtin">int32</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">var</span><span class="token plain"> wg sync</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">WaitGroup</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    wg</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Add</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">go</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">worker</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">stop</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">wg</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    time</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Sleep</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">2</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> time</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Second</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    atomic</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">StoreInt32</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">stop</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    wg</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Wait</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fmt</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Println</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"All workers done"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="conclusion">Conclusion<a href="https://shekhar-patil.github.io/blog/terminate-goroutines#conclusion" class="hash-link" aria-label="Direct link to Conclusion" title="Direct link to Conclusion">​</a></h3>
<p>Graceful termination of goroutines is a fundamental part of writing robust concurrent code in Go. Use:</p>
<ul>
<li><code>context</code> for structured and scalable cancellation</li>
<li><code>channels</code> for simple signaling</li>
<li>shared flags with caution and proper synchronization</li>
</ul>
<p>Each method has its own use case, but <strong>context-based cancellation is the most idiomatic and scalable</strong> approach in modern Go applications.</p>]]></content>
        <author>
            <name>Shekhar Patil</name>
            <uri>https://github.com/shekhar-patil</uri>
        </author>
        <category label="Golang" term="Golang"/>
        <category label="Design Pattern" term="Design Pattern"/>
        <category label="Concurrency" term="Concurrency"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Introducing My New Ruby Gem - PDFScanner]]></title>
        <id>https://shekhar-patil.github.io/blog/scan-pdf-files-with-pdfscanner-gem</id>
        <link href="https://shekhar-patil.github.io/blog/scan-pdf-files-with-pdfscanner-gem"/>
        <updated>2025-05-20T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[PDF files can contain much more than text and images — they may include JavaScript, embedded files, form inputs, or even malicious payloads. If your application processes user-uploaded PDFs, it's essential to scan them for such potential security threats.]]></summary>
        <content type="html"><![CDATA[<p>PDF files can contain much more than text and images — they may include JavaScript, embedded files, form inputs, or even malicious payloads. If your application processes user-uploaded PDFs, it's essential to scan them for such potential security threats.</p>
<p>The <code>pdf_scanner</code> Ruby gem offers an easy-to-use and customizable way to scan PDF files against configurable security policies. It even supports encrypted PDFs and can quarantine any file that violates your policies.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="why-scan-pdfs">Why scan PDFs?<a href="https://shekhar-patil.github.io/blog/scan-pdf-files-with-pdfscanner-gem#why-scan-pdfs" class="hash-link" aria-label="Direct link to Why scan PDFs?" title="Direct link to Why scan PDFs?">​</a></h2>
<p>PDFs are a commonly used format for sharing information. However, attackers often exploit advanced PDF features to inject hidden scripts or deliver malware.</p>
<p>By scanning your PDFs before uploading, processing, or distributing them, you significantly reduce the surface area for security breaches.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="installation">Installation<a href="https://shekhar-patil.github.io/blog/scan-pdf-files-with-pdfscanner-gem#installation" class="hash-link" aria-label="Direct link to Installation" title="Direct link to Installation">​</a></h2>
<p>Add the gem to your <code>Gemfile</code>:</p>
<div class="language-ruby codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-ruby codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">gem 'pdf_scanner'</span><br></span></code></pre></div></div>
<p>Or install it directly:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">gem install pdf_scanner</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="how-to-use-pdf_scanner">How to Use <code>pdf_scanner</code><a href="https://shekhar-patil.github.io/blog/scan-pdf-files-with-pdfscanner-gem#how-to-use-pdf_scanner" class="hash-link" aria-label="Direct link to how-to-use-pdf_scanner" title="Direct link to how-to-use-pdf_scanner">​</a></h2>
<p>Here’s a basic example of how to scan a PDF file:</p>
<div class="language-ruby codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-ruby codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">require 'pdf_scanner'</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">scanner = PdfScanner::Scanner.new</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">result = scanner.scan(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  target_file: 'files/sample.pdf',     # Required</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  config_file: 'config/policy.yml',    # Optional</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  policy: 'strict',                    # Optional</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  dir: 'quarantine',                   # Optional</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  passwd: 'secret'                     # Optional for encrypted PDFs</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">puts result</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="parameters">Parameters<a href="https://shekhar-patil.github.io/blog/scan-pdf-files-with-pdfscanner-gem#parameters" class="hash-link" aria-label="Direct link to Parameters" title="Direct link to Parameters">​</a></h3>
<table><thead><tr><th>Parameter</th><th>Description</th></tr></thead><tbody><tr><td>target_file</td><td>Path to the PDF file you want to scan (<strong>required</strong>).</td></tr><tr><td>config_file</td><td>YAML file with security policies (<strong>optional</strong>).</td></tr><tr><td>policy</td><td>Policy name to enforce (<strong>optional</strong>, defaults to <code>standard</code>).</td></tr><tr><td>dir</td><td>Directory to move/quarantine flagged files (<strong>optional</strong>).</td></tr><tr><td>passwd</td><td>Password for encrypted PDFs (<strong>optional</strong>).</td></tr></tbody></table>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="what-does-the-scan-return">What does the scan return?<a href="https://shekhar-patil.github.io/blog/scan-pdf-files-with-pdfscanner-gem#what-does-the-scan-return" class="hash-link" aria-label="Direct link to What does the scan return?" title="Direct link to What does the scan return?">​</a></h2>
<p>The <code>scan</code> method returns a hash with two keys:</p>
<div class="language-ruby codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-ruby codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  rejected_policies: ['EmbeddedFile', 'JavaScript'],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  analysis_failure: []</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<ul>
<li><code>rejected_policies</code>: List of policies violated by the scanned PDF.</li>
<li><code>analysis_failure</code>: Any errors encountered during the scan.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="configuring-security-policies">Configuring Security Policies<a href="https://shekhar-patil.github.io/blog/scan-pdf-files-with-pdfscanner-gem#configuring-security-policies" class="hash-link" aria-label="Direct link to Configuring Security Policies" title="Direct link to Configuring Security Policies">​</a></h2>
<p>Security policies are defined in a YAML configuration file. Here’s an example policy:</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">standard</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">allow</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> Text</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> Image</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">deny</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> JavaScript</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> EmbeddedFile</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> LaunchAction</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> ExternalStream</span><br></span></code></pre></div></div>
<p>You can customize these rules to fit the specific needs of your application.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="when-should-you-use-pdf_scanner">When should you use <code>pdf_scanner</code>?<a href="https://shekhar-patil.github.io/blog/scan-pdf-files-with-pdfscanner-gem#when-should-you-use-pdf_scanner" class="hash-link" aria-label="Direct link to when-should-you-use-pdf_scanner" title="Direct link to when-should-you-use-pdf_scanner">​</a></h2>
<p>You can use the gem in many practical scenarios, such as:</p>
<ul>
<li>Validating user-uploaded PDFs on web forms</li>
<li>Automating document checks before emailing or sharing</li>
<li>As part of a secure document ingestion pipeline</li>
<li>Complying with data handling and security standards</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="conclusion">Conclusion<a href="https://shekhar-patil.github.io/blog/scan-pdf-files-with-pdfscanner-gem#conclusion" class="hash-link" aria-label="Direct link to Conclusion" title="Direct link to Conclusion">​</a></h2>
<p>The <code>pdf_scanner</code> gem is a lightweight yet powerful tool for securing your PDF processing workflows in Ruby. With support for customizable policies and encrypted PDFs, it’s a must-have for any Ruby developer handling file uploads.</p>
<p>You can find the gem on <a href="https://rubygems.org/gems/pdf_scanner" target="_blank" rel="noopener noreferrer">RubyGems</a> or browse the source code on <a href="https://github.com/shekhar-patil/pdf_scanner" target="_blank" rel="noopener noreferrer">GitHub</a>.</p>]]></content>
        <author>
            <name>Shekhar Patil</name>
            <uri>https://github.com/shekhar-patil</uri>
        </author>
        <category label="Ruby" term="Ruby"/>
        <category label="PDF" term="PDF"/>
        <category label="Security" term="Security"/>
        <category label="Gem" term="Gem"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Failing Google’s Final Round — What I Learned]]></title>
        <id>https://shekhar-patil.github.io/blog/google-interview</id>
        <link href="https://shekhar-patil.github.io/blog/google-interview"/>
        <updated>2025-04-20T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[Google Interview]]></summary>
        <content type="html"><![CDATA[<p><img decoding="async" loading="lazy" alt="Google Interview" src="https://shekhar-patil.github.io/assets/images/google-a5c21f3a2cb4ce1731b1ad2369b6033f.webp" width="1920" height="1080" class="img_ev3q"></p>
<p>Like many of us, I used to only share the good stuff — job offers, achievements, career milestones. But over time, I realized failures are just as important. They teach us, humble us, and help others feel less alone in their journey.</p>
<p>This post is about my experience interviewing at Google. I made it to the final round but didn’t get the offer. It hurt, but I also learned a lot. I’m sharing my journey in hopes that it helps you prepare better.</p>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="how-it-started">How It Started<a href="https://shekhar-patil.github.io/blog/google-interview#how-it-started" class="hash-link" aria-label="Direct link to How It Started" title="Direct link to How It Started">​</a></h2>
<p>I applied through the <a href="https://careers.google.com/" target="_blank" rel="noopener noreferrer">Google Careers</a> page around mid-November 2024.. This time, instead of the usual rejection email, I got a call from a Google recruiter — a promising start. He scheduled first Screening Call.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="initial-hr-round-the-screening-call">Initial HR Round: The Screening Call<a href="https://shekhar-patil.github.io/blog/google-interview#initial-hr-round-the-screening-call" class="hash-link" aria-label="Direct link to Initial HR Round: The Screening Call" title="Direct link to Initial HR Round: The Screening Call">​</a></h2>
<p>The recruiter asked about my education, experience, projects, the tech I’ve worked with, and the scale of systems I’ve built. It was a standard screening call—until they asked:</p>
<p><strong>"Have you done any competitive programming?"</strong></p>
<p>At the time, I had solved around 90 problems on LeetCode, mostly Easy and Medium. I was honest and asked for a month to prepare before the next step.</p>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="how-google-evaluates-candidates">How Google Evaluates Candidates<a href="https://shekhar-patil.github.io/blog/google-interview#how-google-evaluates-candidates" class="hash-link" aria-label="Direct link to How Google Evaluates Candidates" title="Direct link to How Google Evaluates Candidates">​</a></h2>
<p>Before getting into the rounds, it’s helpful to know how Google evaluates you. After each interview, feedback is given as one of these:</p>
<ul>
<li>Strong No Hire</li>
<li>No Hire</li>
<li>Leaning No Hire</li>
<li>Leaning Hire</li>
<li>Hire</li>
<li>Strong Hire</li>
</ul>
<p>Only consistent "Hire" or "Strong Hire" ratings lead to an offer.</p>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="the-elimination-round">The Elimination Round<a href="https://shekhar-patil.github.io/blog/google-interview#the-elimination-round" class="hash-link" aria-label="Direct link to The Elimination Round" title="Direct link to The Elimination Round">​</a></h2>
<p>I used the one-month prep time to study hard. I solved over 250 DSA problems, mostly on LeetCode and AlgoExpert. You can see my full preparation here:
📘 <a href="https://www.shekharpatil.tech/docs/data-structures-and-algorithms/dsa-roadmap" target="_blank" rel="noopener noreferrer">DSA Roadmap</a></p>
<p>The round was a live coding interview with three graph problems, all linked together. I had to solve and code them in a Google Doc.</p>
<p>This round went well—I solved everything. Three days later, the recruiter called:</p>
<blockquote>
<p>"You cleared the elimination round. Feedback is positive."</p>
</blockquote>
<p><strong>Probable rating:</strong> <em>Hire / Strong Hire</em></p>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="technical-round-1-low-level-system-design">Technical Round 1: Low-Level System Design<a href="https://shekhar-patil.github.io/blog/google-interview#technical-round-1-low-level-system-design" class="hash-link" aria-label="Direct link to Technical Round 1: Low-Level System Design" title="Direct link to Technical Round 1: Low-Level System Design">​</a></h2>
<p>I was given a real-world scenario and asked to design core functionality using appropriate data structures. I solved it using arrays with <strong>O(N²)</strong> time complexity.</p>
<p>The interviewer asked if I could optimize it, but under pressure, I couldn’t. After the interview, I realized a <strong>Binary Search Tree (or Red-Black Tree)</strong> could reduce it to <strong>O(N log N)</strong>.</p>
<p><strong>Probable rating:</strong> <em>Leaning Hire</em></p>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="technical-round-2-hashmap-based-problem">Technical Round 2: HashMap-Based Problem<a href="https://shekhar-patil.github.io/blog/google-interview#technical-round-2-hashmap-based-problem" class="hash-link" aria-label="Direct link to Technical Round 2: HashMap-Based Problem" title="Direct link to Technical Round 2: HashMap-Based Problem">​</a></h2>
<p>This round focused on implementing a solution using HashMaps. I misunderstood the problem at first, which cost time. After clarification, I fixed the code in the last 15 minutes.</p>
<p>The interviewer spotted a <strong>bug</strong>, though the majority of my solution was correct.</p>
<p><strong>Probable rating:</strong> <em>Leaning Hire / Hire</em></p>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="technical-round-3-graph-problem">Technical Round 3: Graph Problem<a href="https://shekhar-patil.github.io/blog/google-interview#technical-round-3-graph-problem" class="hash-link" aria-label="Direct link to Technical Round 3: Graph Problem" title="Direct link to Technical Round 3: Graph Problem">​</a></h2>
<p>This round was tricky. I took some time to understand the problem and realized it involved <strong>cycle detection in a graph</strong>.</p>
<p>I made mistakes in the beginning, and it took me about <strong>35 minutes</strong> to get the solution right. Then I did a quick dry run in the another 5 minutes. The interviewer confirmed my final solution was correct. He had a follow-up question, but we ran out of time.</p>
<p><strong>Probable rating:</strong> <em>Leaning Hire</em></p>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="the-result">The Result<a href="https://shekhar-patil.github.io/blog/google-interview#the-result" class="hash-link" aria-label="Direct link to The Result" title="Direct link to The Result">​</a></h2>
<p>I had mixed feelings—both excited and nervous. It had been almost three months of continuous effort, and I was very close to the final stage. The next round was the Googliness interview, which is mostly a behavioral round, and many people usually clear it without much trouble.</p>
<p>Two weeks later, the recruiter called and said:</p>
<p>“We won’t be moving forward. The feedback mentioned that you should use more optimal data structures, and your problem-solving speed needs improvement. But feel free to reapply after a year.”</p>
<p>It was disappointing to hear, especially after coming so far. But I didn’t see it as a failure. Here’s why.</p>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="what-i-gained">What I Gained<a href="https://shekhar-patil.github.io/blog/google-interview#what-i-gained" class="hash-link" aria-label="Direct link to What I Gained" title="Direct link to What I Gained">​</a></h2>
<p>The whole process took almost <strong>3-4 months</strong>, and in that time:</p>
<ul>
<li>I moved from <strong>Ruby</strong> to <strong>Golang</strong> (You can start Golang Here <a href="https://www.shekharpatil.tech/docs/golang/intro" target="_blank" rel="noopener noreferrer">https://www.shekharpatil.tech/docs/golang/intro</a>)</li>
<li>I developed a strong understanding of low level system design and data structures</li>
<li>I solved hundreds of problems and built my roadmap here <a href="https://www.shekharpatil.tech/docs/data-structures-and-algorithms/dsa-roadmap" target="_blank" rel="noopener noreferrer">https://www.shekharpatil.tech/docs/data-structures-and-algorithms/dsa-roadmap</a></li>
<li>I learned what top-tier companies really look for: correctness, speed, clarity, and optimality</li>
</ul>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="️-key-takeaways-for-you">🛠️ Key Takeaways for You<a href="https://shekhar-patil.github.io/blog/google-interview#%EF%B8%8F-key-takeaways-for-you" class="hash-link" aria-label="Direct link to 🛠️ Key Takeaways for You" title="Direct link to 🛠️ Key Takeaways for You">​</a></h2>
<ol>
<li><strong>Know your best language:</strong> I chose Go, but I'm more fluent in Ruby. In time-bound interviews, using a language you’re super comfortable with makes a big difference.</li>
<li><strong>Manage your time:</strong> Getting the right answer isn’t enough. Google looks at how quickly and efficiently you solve problems.</li>
<li><strong>Simulate real interview conditions:</strong> Use a timer. Code in a shared doc. Practice talking while solving.</li>
<li><strong>Learn from mistakes:</strong> Every small mistake taught me something valuable.</li>
</ol>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="-whats-next">✅ What’s Next?<a href="https://shekhar-patil.github.io/blog/google-interview#-whats-next" class="hash-link" aria-label="Direct link to ✅ What’s Next?" title="Direct link to ✅ What’s Next?">​</a></h2>
<p>I’m not giving up. I’ll reapply in a year. Till then, I’m focused on:</p>
<ul>
<li>Advanced system design</li>
<li>Distributed systems</li>
<li>Speeding up problem-solving</li>
<li>Real-world contributions</li>
<li>Mastering Go and revisiting Ruby</li>
</ul>
<p>If you're preparing for Google or any FAANG interview, check out my:</p>
<ul>
<li>📘 <a href="https://www.shekharpatil.tech/docs/data-structures-and-algorithms/dsa-roadmap" target="_blank" rel="noopener noreferrer">DSA Roadmap</a></li>
<li>✍️ <a href="https://www.shekharpatil.tech/blog" target="_blank" rel="noopener noreferrer">All My Blogs</a></li>
</ul>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="-explore-more">🌐 Explore More<a href="https://shekhar-patil.github.io/blog/google-interview#-explore-more" class="hash-link" aria-label="Direct link to 🌐 Explore More" title="Direct link to 🌐 Explore More">​</a></h2>
<ul>
<li>🧑‍💻 <a href="https://www.shekharpatil.tech/" target="_blank" rel="noopener noreferrer">My Website &amp; Projects</a></li>
<li>📚 <a href="https://www.shekharpatil.tech/docs/golang/intro" target="_blank" rel="noopener noreferrer">Golang Learning Path</a></li>
<li>🧠 <a href="https://www.shekharpatil.tech/docs/data-structures-and-algorithms/dsa-roadmap" target="_blank" rel="noopener noreferrer">DSA Roadmap</a></li>
</ul>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="-final-thoughts">🙌 Final Thoughts<a href="https://shekhar-patil.github.io/blog/google-interview#-final-thoughts" class="hash-link" aria-label="Direct link to 🙌 Final Thoughts" title="Direct link to 🙌 Final Thoughts">​</a></h2>
<p>Not getting into Google stung—but the journey changed me. I learned more in three months than I had in the past year. If you’re going through something similar, just know this: you’re not alone, and every setback is a setup for growth.</p>]]></content>
        <author>
            <name>Shekhar Patil</name>
            <uri>https://github.com/shekhar-patil</uri>
        </author>
        <category label="Interview" term="Interview"/>
        <category label="Google" term="Google"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Worker pool pattern in Golang]]></title>
        <id>https://shekhar-patil.github.io/blog/worker-pool-pattern</id>
        <link href="https://shekhar-patil.github.io/blog/worker-pool-pattern"/>
        <updated>2024-08-08T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[What is worker pool pattern?]]></summary>
        <content type="html"><![CDATA[<h3 class="anchor anchorWithStickyNavbar_LWe7" id="what-is-worker-pool-pattern">What is worker pool pattern?<a href="https://shekhar-patil.github.io/blog/worker-pool-pattern#what-is-worker-pool-pattern" class="hash-link" aria-label="Direct link to What is worker pool pattern?" title="Direct link to What is worker pool pattern?">​</a></h3>
<p>The Worker Pool pattern is a concurrency pattern in Go that allows you to manage and control the number of goroutines working on a set of tasks. This pattern is particularly useful when you have a large number of tasks to process and want to limit the number of concurrent goroutines to prevent excessive resource usage.</p>
<p><img decoding="async" loading="lazy" alt="Worker pool pattern" src="https://shekhar-patil.github.io/assets/images/worker-pool-pattern-d4e6b452e1e1cdd40d9024b11b80581f.jpg" width="837" height="307" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="the-basic-flow-of-the-worker-pool-pattern-looks-like-this">The basic flow of the worker pool pattern looks like this:<a href="https://shekhar-patil.github.io/blog/worker-pool-pattern#the-basic-flow-of-the-worker-pool-pattern-looks-like-this" class="hash-link" aria-label="Direct link to The basic flow of the worker pool pattern looks like this:" title="Direct link to The basic flow of the worker pool pattern looks like this:">​</a></h3>
<div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">package</span><span class="token plain"> main</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">func</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">main</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    numJobs </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">10</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    numWorkers </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// Create job and result channels</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// Start the worker pool</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// Submit jobs to workers</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// Collect results</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// Wait for all goroutines to finish</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="here-is-the-final-code-implementing-the-worker-pool-pattern">Here is the final code implementing the Worker Pool pattern:<a href="https://shekhar-patil.github.io/blog/worker-pool-pattern#here-is-the-final-code-implementing-the-worker-pool-pattern" class="hash-link" aria-label="Direct link to Here is the final code implementing the Worker Pool pattern:" title="Direct link to Here is the final code implementing the Worker Pool pattern:">​</a></h3>
<p>Collects results in a separate goroutine.</p>
<div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">package</span><span class="token plain"> main</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">"fmt"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">"sync"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">type</span><span class="token plain"> Job </span><span class="token keyword" style="color:#00009f">struct</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Id    </span><span class="token builtin">int</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Value </span><span class="token builtin">int</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">type</span><span class="token plain"> Result </span><span class="token keyword" style="color:#00009f">struct</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    JobId </span><span class="token builtin">int</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Value </span><span class="token builtin">int</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">type</span><span class="token plain"> WorkerPool </span><span class="token keyword" style="color:#00009f">struct</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    numJobs    </span><span class="token builtin">int</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    numWorkers </span><span class="token builtin">int</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    jobs       </span><span class="token keyword" style="color:#00009f">chan</span><span class="token plain"> Job</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    results    </span><span class="token keyword" style="color:#00009f">chan</span><span class="token plain"> Result</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    wg         sync</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">WaitGroup </span><span class="token comment" style="color:#999988;font-style:italic">// WaitGroup to track all worker goroutines</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">func</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">wp </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">WorkerPool</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">StartWorker</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">id </span><span class="token builtin">int</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">defer</span><span class="token plain"> wp</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">wg</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Done</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> job </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">range</span><span class="token plain"> wp</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">jobs </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        fmt</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Printf</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"Job %d processed by worker %d\n"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> job</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Id</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> id</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        wp</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">results </span><span class="token operator" style="color:#393A34">&lt;-</span><span class="token plain"> Result</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">JobId</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> job</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Id</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> Value</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> job</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Value </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">func</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">wp </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">WorkerPool</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">StartWorkers</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> i </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> i </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain"> wp</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">numWorkers</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> i</span><span class="token operator" style="color:#393A34">++</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        wp</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">wg</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Add</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">go</span><span class="token plain"> wp</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">StartWorker</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">i</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">func</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">wp </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">WorkerPool</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">SubmitJobs</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> i </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> i </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain"> wp</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">numJobs</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> i</span><span class="token operator" style="color:#393A34">++</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        wp</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">jobs </span><span class="token operator" style="color:#393A34">&lt;-</span><span class="token plain"> Job</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">Id</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> i</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> Value</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> i</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">close</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">wp</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">jobs</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">func</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">wp </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">WorkerPool</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">PrintResults</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">wg </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">sync</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">WaitGroup</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">defer</span><span class="token plain"> wg</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Done</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> result </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">range</span><span class="token plain"> wp</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">results </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        fmt</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Printf</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"Result: Job %d Value %d\n"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> result</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">JobId</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> result</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Value</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">func</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">main</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    numJobs </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">10</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    numWorkers </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">var</span><span class="token plain"> wg sync</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">WaitGroup </span><span class="token comment" style="color:#999988;font-style:italic">// WaitGroup to track the results printer goroutine</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// Initialize the WorkerPool with job and result channels</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    wp </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> WorkerPool</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        numJobs</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">    numJobs</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        numWorkers</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> numWorkers</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        jobs</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">       </span><span class="token function" style="color:#d73a49">make</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">chan</span><span class="token plain"> Job</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> numJobs</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        results</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">    </span><span class="token function" style="color:#d73a49">make</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">chan</span><span class="token plain"> Result</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> numJobs</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// Start workers</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    wp</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">StartWorkers</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// Submit jobs to the job channel</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">go</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">func</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        wp</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">SubmitJobs</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// Start the results printer goroutine</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    wg</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Add</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">go</span><span class="token plain"> wp</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">PrintResults</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">wg</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// Wait for all worker goroutines to complete</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    wp</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">wg</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Wait</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// Close the results channel once all workers are done</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">close</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">wp</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">results</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// Wait for the results printer to finish</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    wg</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Wait</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre></div></div>
<p>We use two separate WaitGroups in this pattern:</p>
<ol>
<li><strong>Worker WaitGroup</strong>: Tracks when all worker goroutines have finished their tasks.</li>
<li><strong>Results WaitGroup</strong>: Ensures the results printing goroutine completes its work after all results are processed.</li>
</ol>
<p>This separation allows us to manage the lifecycle of workers and results printing independently, ensuring that all tasks are processed and printed correctly.</p>]]></content>
        <author>
            <name>Shekhar Patil</name>
            <uri>https://github.com/shekhar-patil</uri>
        </author>
        <category label="Golang" term="Golang"/>
        <category label="Design Pattern" term="Design Pattern"/>
        <category label="Concurrency" term="Concurrency"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[How to create and use Rake task in ruby and use it in the Rails?]]></title>
        <id>https://shekhar-patil.github.io/blog/rake-task-in-rails</id>
        <link href="https://shekhar-patil.github.io/blog/rake-task-in-rails"/>
        <updated>2020-10-04T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[Sometimes, We need to have a task that can be executed at regular basic at some time. In ruby, we have a rake task to define and execute this task at any time.  We can use rake tasks in Rails for various purposes.]]></summary>
        <content type="html"><![CDATA[<p>Sometimes, We need to have a task that can be executed at regular basic at some time. In ruby, we have a rake task to define and execute this task at any time.  We can use rake tasks in Rails for various purposes.</p>
<p>Rake is inspired by Linux <a href="https://en.wikipedia.org/wiki/Make_(software)" target="_blank" rel="noopener noreferrer">make utility</a>. Its name comes from the <code>Ruby Make</code>. Rake is a task management utility that reads and executes the tasks defined in the ruby language in the 'Rakefile`. It was written by the late <a href="https://en.wikipedia.org/wiki/Jim_Weirich" target="_blank" rel="noopener noreferrer">Jim Weirich</a>.</p>
<h1>How to create a Rake task.</h1>
<p>Create a file with the name 'Rakefile' and write the following content in it.
<code> $ touch Rakefile</code></p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">desc 'print hello world'</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">task :hello_world do</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  puts 'Hello world from Rubyist'</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">end</span><br></span></code></pre></div></div>
<p>Here <code>desc</code> command defines the description of the task and <code>task</code> command defines the actual task that needs to be executed. Here we are defining a simple task which is printing "Hello world from Rubyist.".</p>
<p>If you are in the directory containing the Rakefile then you can execute the following commands:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ rake --task              This command will show all the tasks defined in the Rakefile along with its description.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">=&gt; rake hello_world        # Print hello world</span><br></span></code></pre></div></div>
<p>Now we can execute the task using the following command</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ rake hello_world</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">=&gt; Hello world from Rubyist</span><br></span></code></pre></div></div>
<p>We can also use namespace while defining the Rake task add the following code to Rakefile:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">desc 'Display files from the current directory'</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">namespace :admin do</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  task :display_files do</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    system('ls')</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  end</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">end</span><br></span></code></pre></div></div>
<p>Let's see all tasks once again:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ rake --task</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">=&gt; rake admin:display_files  # Display files from the current directory</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   rake hello_world          # print hello world</span><br></span></code></pre></div></div>
<p>We can execute this task as follows:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ rake admin:hello_world</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(It should display files from your current directory)</span><br></span></code></pre></div></div>
<p>Namespacing to rake task is always good when the number of tasks is more and also it separates the context of the task.</p>
<p>In the Rails project we can see many rake tasks as following:</p>
<ul>
<li>rails db<!-- -->:migrate</li>
<li>rails routes</li>
<li>rake tmp<!-- -->:clear</li>
<li>rake tmp<!-- -->:create</li>
</ul>
<p>We can find out many more tasks by executing <code>rake --task</code> command in the Rails application root directory.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="how-to-define-custom-rake-tasks-in-rails">How to define custom rake tasks in Rails?<a href="https://shekhar-patil.github.io/blog/rake-task-in-rails#how-to-define-custom-rake-tasks-in-rails" class="hash-link" aria-label="Direct link to How to define custom rake tasks in Rails?" title="Direct link to How to define custom rake tasks in Rails?">​</a></h2>
<p>We can create file with <code>.rake</code> extension in <code>/lib/tasks/</code> folder.</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># lib/tasks/clear_logs.rake</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">namespace :Logs do</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  desc 'clear the log files'</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  task clear: :environment do</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Dir["log/*.log"].each do |file|</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       File.unlink(file)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    end</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  end</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">end</span><br></span></code></pre></div></div>
<p>Above task is deleting all files from <code>log directory</code>.</p>
<p>Now we can simply execute this task as following:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ rake Logs:clear</span><br></span></code></pre></div></div>
<p>I hope you loved it.
Please feel free to contact me on <a href="https://twitter.com/Shekharpatil95" target="_blank" rel="noopener noreferrer">twitter</a>.</p>]]></content>
        <author>
            <name>Shekhar Patil</name>
            <uri>https://github.com/shekhar-patil</uri>
        </author>
        <category label="Rails" term="Rails"/>
        <category label="Ruby" term="Ruby"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Postgres users and their permission issue.]]></title>
        <id>https://shekhar-patil.github.io/blog/postgres-permission-denied</id>
        <link href="https://shekhar-patil.github.io/blog/postgres-permission-denied"/>
        <updated>2020-04-09T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[Have you ever faced the following issue while fetching records from Postgres in the rails?]]></summary>
        <content type="html"><![CDATA[<p>Have you ever faced the following issue while fetching records from Postgres in the rails?</p>
<p><strong><code>ActiveRecord::StatementInvalid: PG::InsufficientPrivilege: ERROR:  permission denied for relation</code></strong></p>
<p>I had following configuration in my database.yml file</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">development:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &lt;&lt;: *default</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  database: dev_db_name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">staging:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &lt;&lt;: *default</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  database: staging_db_name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  username: staging_db_username</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  password: password</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">test:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &lt;&lt;: *default</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  database: test_db_name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  username: test_db_username</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  password: password</span><br></span></code></pre></div></div>
<p>So while fetching Postgres record from rails console I was getting above mentioned error</p>
<p>Another issue was the rails were not providing the username for which permission error was occurring and I was not sure about the username used while fetching the Postgres record.</p>
<p>To check which user is getting permission error we can check Postgres log file:
If you are using ubuntu the please open following file:</p>
<p><code>/var/log/postgresql/postgresql-10-main.log</code> (log file name can be different as per your Postgres version)</p>
<p>In the log file you will get line similar to the following:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">2020-04-09 17:24:01.874 IST [25904] root@dev_db_name ERROR:  permission denied for relation</span><br></span></code></pre></div></div>
<p>Here we can get the username <code>root@dev_db_name</code> so <code>root</code> user is getting permission denied for the table.</p>
<p>To solve this issue use the following steps:</p>
<ul>
<li>
<p>Open your Postgres console with the following command:</p>
<p><code>sudo su - postgres</code> followed by <code>psql</code></p>
</li>
<li>
<p>Now use <code>\du</code> command to check users and their permissions.</p>
</li>
</ul>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">postgres=# \du</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                      List of roles</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   Role name    |                         Attributes                         | Member of</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">----------------+------------------------------------------------------------+-----------</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> postgres       | Superuser, Create role, Create DB, Replication, Bypass RLS | {}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> root           |                                                            | {}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> shekhar        | Superuser, Create DB, Bypass RLS                           | {}</span><br></span></code></pre></div></div>
<p>Here we can see root user don't have any permission</p>
<p>Now grant the following permissions to the <code>root</code> user.</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">GRANT ALL PRIVILEGES ON DATABASE dev_db_name to root;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">postgres=# ALTER USER root WITH SUPERUSER CREATEDB BYPASSRLS;</span><br></span></code></pre></div></div>
<p>you can read more about the Privileges in PostgreSQL <a href="https://www.digitalocean.com/docs/databases/postgresql/how-to/modify-user-privileges/" target="_blank" rel="noopener noreferrer">Here</a>.</p>
<p>I hope it will solve your problem.
If you still have a problem please feel free to contact me on <a href="mailto:patilshekhar900@gmail.com" target="_blank" rel="noopener noreferrer">patilshekhar900@gmail.com</a> or <a href="https://twitter.com/Shekharpatil95" target="_blank" rel="noopener noreferrer">twitter</a>.</p>]]></content>
        <author>
            <name>Shekhar Patil</name>
            <uri>https://github.com/shekhar-patil</uri>
        </author>
        <category label="Rails" term="Rails"/>
        <category label="Postgres" term="Postgres"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Do you know how helpful the const_get method is?]]></title>
        <id>https://shekhar-patil.github.io/blog/const-get-method-in-ruby</id>
        <link href="https://shekhar-patil.github.io/blog/const-get-method-in-ruby"/>
        <updated>2020-02-11T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[First, we will understand how the const_get method works then I will explain how we can use it in different ways and what are the use cases.]]></summary>
        <content type="html"><![CDATA[<p>First, we will understand how the const_get method works then I will explain how we can use it in different ways and what are the use cases.</p>
<div class="language-ruby codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-ruby codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">module Vehicle</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  class Car</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    WHEELS = 4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  end</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">end</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">puts Object.const_get 'Vehicle::Car::WHEELS'   # =&gt; 4</span><br></span></code></pre></div></div>
<p>Here, we can see that we have passed the string 'Vehicle::Car::WHEELS' parameter to method const_get and it has given the outcome '4' which is the actual value of constant wheels.</p>
<p>We can also use some variable to store this string and get the constant's value bypassing this variable as a parameter to the const_get method.</p>
<p>We can also lookup the ancestor's constant using const_get method if the inherit flag is set as true.</p>
<p><code>Note:</code> ancestors of some module means a list of modules included or prepend in that module.</p>
<div class="language-ruby codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-ruby codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">module Vehicle</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  class Car</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    WHEELS = 4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  end</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  class TeslaS &lt; Car</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  end</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">end</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">wheel_const = 'Vehicle::TeslaS::WHEELS'</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Here true is inherit flag which can be true or false</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">puts Object.const_get(wheel_const, true)  # =&gt; 4</span><br></span></code></pre></div></div>
<p>Here we have given the inherit flag as true it means lookup the base class and the module Vehicle's ancestors as well. If we would have included/prepend some modules in our Vehicle module then the const_get method also would have lookup into those modules.</p>
<p>Now, let's try to change that flag into false.</p>
<div class="language-ruby codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-ruby codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">module Vehicle</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  class Car</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    WHEELS = 4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  end</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  class TeslaS &lt; Car</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  end</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">end</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">wheel_const = 'Vehicle::TeslaS::WHEELS'</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">puts Object.const_get(wheel_const, false)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#  Output:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#  Traceback (most recent call last):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#	  1: from random.rb:11:in `&lt;main&gt;'</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#  random.rb:11:in `const_get': uninitialized constant Vehicle::TeslaS::WHEELS (NameError)</span><br></span></code></pre></div></div>
<p>Now, we are getting an error uninitialized constant <code>Vehicle::TeslaS::WHEELS</code> because now we have set inherit flag as a false so const_get method will not lookup base class or modules ancestors for <code>WHEEL</code> constant. It will throw an error because the <code>WHEEL</code> constant is not defined in the TeslaS class.</p>
<p><code>Note:</code> If we do not mention the inherit flag then it is by default true.</p>
<p>I hope you loved it.
Please feel free to contact me on <a href="https://twitter.com/Shekharpatil95" target="_blank" rel="noopener noreferrer">twitter</a>.</p>]]></content>
        <author>
            <name>Shekhar Patil</name>
            <uri>https://github.com/shekhar-patil</uri>
        </author>
        <category label="Ruby" term="Ruby"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Difference between puts, p, and print in ruby.]]></title>
        <id>https://shekhar-patil.github.io/blog/compare-puts-p-print-in-ruby</id>
        <link href="https://shekhar-patil.github.io/blog/compare-puts-p-print-in-ruby"/>
        <updated>2019-10-13T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[Ruby is developer friendly language and it provides many ways to perform same task. For example for printing the output on the console we can use puts, prints and p. But multiple ways to do same task means more confusion for selecting correct way for our use case. In this blog we will discuss about difference between puts, print and p so that we can select correct method as per our use case.]]></summary>
        <content type="html"><![CDATA[<p>Ruby is developer friendly language and it provides many ways to perform same task. For example for printing the output on the console we can use puts, prints and p. But multiple ways to do same task means more confusion for selecting correct way for our use case. In this blog we will discuss about difference between puts, print and p so that we can select correct method as per our use case.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="lets-start-with-hello-world-using-all-of-this">Let's start with <code>hello world</code> using all of this.<a href="https://shekhar-patil.github.io/blog/compare-puts-p-print-in-ruby#lets-start-with-hello-world-using-all-of-this" class="hash-link" aria-label="Direct link to lets-start-with-hello-world-using-all-of-this" title="Direct link to lets-start-with-hello-world-using-all-of-this">​</a></h4>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="1-using-puts">1. Using <code>puts</code>.<a href="https://shekhar-patil.github.io/blog/compare-puts-p-print-in-ruby#1-using-puts" class="hash-link" aria-label="Direct link to 1-using-puts" title="Direct link to 1-using-puts">​</a></h4>
<div class="language-ruby codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-ruby codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&gt; puts 'hello world'</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">hello world</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> =&gt; nil</span><br></span></code></pre></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="2-using-p">2. Using <code>p</code>.<a href="https://shekhar-patil.github.io/blog/compare-puts-p-print-in-ruby#2-using-p" class="hash-link" aria-label="Direct link to 2-using-p" title="Direct link to 2-using-p">​</a></h4>
<div class="language-ruby codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-ruby codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&gt; p 'hello world'</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">"hello world"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> =&gt; "hello world"</span><br></span></code></pre></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="3-using-print">3. Using <code>print</code><a href="https://shekhar-patil.github.io/blog/compare-puts-p-print-in-ruby#3-using-print" class="hash-link" aria-label="Direct link to 3-using-print" title="Direct link to 3-using-print">​</a></h4>
<div class="language-ruby codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-ruby codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">print 'hello world'</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">hello world =&gt; nil</span><br></span></code></pre></div></div>
<p>You must have observed there is some difference in every output.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="few-observations">Few observations:<a href="https://shekhar-patil.github.io/blog/compare-puts-p-print-in-ruby#few-observations" class="hash-link" aria-label="Direct link to Few observations:" title="Direct link to Few observations:">​</a></h4>
<ol>
<li>puts and print has return <code>nil</code> while p has return the input we have passed to it.</li>
<li>p has shown output in string format.</li>
<li>return value of puts and p has printed on next line and for print return value is on same line.</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="lets-take-one-more-example-for-better-understanding">Let's take one more example for better understanding:<a href="https://shekhar-patil.github.io/blog/compare-puts-p-print-in-ruby#lets-take-one-more-example-for-better-understanding" class="hash-link" aria-label="Direct link to Let's take one more example for better understanding:" title="Direct link to Let's take one more example for better understanding:">​</a></h3>
<p>Now we create one file with extension .rb and paste below given code in that file.</p>
<p>1.Example of puts:</p>
<div class="language-ruby codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-ruby codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">A = 'I'</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">B = 'Love'</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">C = 'Ruby'</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">puts A</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">puts B</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">puts C</span><br></span></code></pre></div></div>
<p>Now we can run this file using <code>ruby filename.rb</code> in the terminal and before running this command confirm that you are in the same directory where you have created ruby file.</p>
<p>output of above code will be as following</p>
<p>Output of puts:</p>
<div class="language-ruby codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-ruby codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">I</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Love</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Ruby</span><br></span></code></pre></div></div>
<p>Now we will execute same code for print and p.</p>
<p>2.Using print</p>
<div class="language-ruby codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-ruby codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">A = 'I'</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">B = 'Love'</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">C = 'Ruby'</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">print A</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">print B</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">print C</span><br></span></code></pre></div></div>
<p>Output of print:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ILoveRuby</span><br></span></code></pre></div></div>
<p>3.Using p.</p>
<div class="language-ruby codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-ruby codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">A = 'I'</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">B = 'Love'</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">C = 'Ruby'</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">p A</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">p B</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">p C</span><br></span></code></pre></div></div>
<p>Output of p:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">"I"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">"Love"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">"Ruby"</span><br></span></code></pre></div></div>
<p>Now you must have more clarity about all of this methods.</p>
<p>Let's conclude the blog:</p>
<ol>
<li>
<p>puts: puts add newline character at the end of the output. that is why we got return value <code>nil</code> on the next line.</p>
</li>
<li>
<p>print: print does not add newline character at the end of output because of that the return value of print that is <code>nil</code> is printed on the same line where output is printed.</p>
</li>
<li>
<p>p: p does not change data type of the input provided to it. if we are passing string type of input it also prints the string type of output. Most importantly, unlike to puts and print p does not return nil value. It returns the same value which has passed to it.</p>
</li>
</ol>
<p>Please feel free to contact me on <a href="https://twitter.com/Shekharpatil95" target="_blank" rel="noopener noreferrer">twitter</a>.</p>]]></content>
        <author>
            <name>Shekhar Patil</name>
            <uri>https://github.com/shekhar-patil</uri>
        </author>
        <category label="Ruby" term="Ruby"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Extend, Merge methods in the Javascript.]]></title>
        <id>https://shekhar-patil.github.io/blog/how-to-merge-objects-in-javascript</id>
        <link href="https://shekhar-patil.github.io/blog/how-to-merge-objects-in-javascript"/>
        <updated>2019-08-24T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[Yesterday, I was working on an issue in which database value for particular object attribute was correct but on UI it was showing the wrong value. I dig into the front-end Javascript code and I found that bug occurred while merging the two objects in Javascript. first, we will discuss how to merge two objects then I will explain what we should care about while merging two objects.]]></summary>
        <content type="html"><![CDATA[<p>Yesterday, I was working on an issue in which database value for particular object attribute was correct but on UI it was showing the wrong value. I dig into the front-end Javascript code and I found that bug occurred while merging the two objects in Javascript. first, we will discuss how to merge two objects then I will explain what we should care about while merging two objects.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="how-to-merge-objects">How to merge objects?<a href="https://shekhar-patil.github.io/blog/how-to-merge-objects-in-javascript#how-to-merge-objects" class="hash-link" aria-label="Direct link to How to merge objects?" title="Direct link to How to merge objects?">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="1-merge-two-objects-having-distinct-attributes-names">1. Merge two objects having distinct attributes names.<a href="https://shekhar-patil.github.io/blog/how-to-merge-objects-in-javascript#1-merge-two-objects-having-distinct-attributes-names" class="hash-link" aria-label="Direct link to 1. Merge two objects having distinct attributes names." title="Direct link to 1. Merge two objects having distinct attributes names.">​</a></h3>
<p>declare two objects as the following:</p>
<div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">var</span><span class="token plain"> student </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token literal-property property" style="color:#36acaa">student_name</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Rahul"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token literal-property property" style="color:#36acaa">age</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">22</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token literal-property property" style="color:#36acaa">standard</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"6th"</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">var</span><span class="token plain"> school </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token literal-property property" style="color:#36acaa">school_name</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"SBK high school"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token literal-property property" style="color:#36acaa">location</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Pune"</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre></div></div>
<p>Now, we will use <code>extend</code> method to merge these two objects.</p>
<div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">extend</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">student</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> school</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token literal-property property" style="color:#36acaa">student_name</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Rahul"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token literal-property property" style="color:#36acaa">age</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">22</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token literal-property property" style="color:#36acaa">standard</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"6th"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token literal-property property" style="color:#36acaa">school_name</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"SBK high school"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token literal-property property" style="color:#36acaa">location</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Pune"</span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div>
<p>We can also use the <code>merge</code> method to merge these objects</p>
<div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">merge</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">student</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> school</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token literal-property property" style="color:#36acaa">student_name</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Rahul"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token literal-property property" style="color:#36acaa">age</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">22</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token literal-property property" style="color:#36acaa">standard</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"6th"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token literal-property property" style="color:#36acaa">length</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token keyword nil" style="color:#00009f">undefined</span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="2-merge-two-objects-having-some-common-attributes-names">2. Merge two objects having some common attributes names.<a href="https://shekhar-patil.github.io/blog/how-to-merge-objects-in-javascript#2-merge-two-objects-having-some-common-attributes-names" class="hash-link" aria-label="Direct link to 2. Merge two objects having some common attributes names." title="Direct link to 2. Merge two objects having some common attributes names.">​</a></h3>
<p>We don't have to care where there are distinct attributes in the objects. But when there are some common attribute names then those attributes value gets an override.</p>
<p>declare two objects having the same attribute names like the following:</p>
<div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">var</span><span class="token plain"> student </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token literal-property property" style="color:#36acaa">name</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Rahul"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token literal-property property" style="color:#36acaa">age</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">22</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token literal-property property" style="color:#36acaa">standard</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"6th"</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">var</span><span class="token plain"> school </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token literal-property property" style="color:#36acaa">name</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"SBK high school"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token literal-property property" style="color:#36acaa">location</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Pune"</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre></div></div>
<p>Now, we will use <code>extend</code> method to merge these two objects.</p>
<div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">extend</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">student</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> school</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token literal-property property" style="color:#36acaa">name</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"SBK high school"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token literal-property property" style="color:#36acaa">age</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">22</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token literal-property property" style="color:#36acaa">standard</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"6th"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token literal-property property" style="color:#36acaa">location</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Pune"</span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div>
<p>We can also use the <code>merge</code> method to merge these objects</p>
<div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">merge</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">student</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> school</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token literal-property property" style="color:#36acaa">name</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Rahul"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token literal-property property" style="color:#36acaa">age</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">22</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token literal-property property" style="color:#36acaa">standard</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"6th"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token literal-property property" style="color:#36acaa">length</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token keyword nil" style="color:#00009f">undefined</span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div>
<p>Now we have understood how to merge two objects in Javascript and the difference between merge and extend method in Javascript. We should be careful while merging two objects having a common attribute name. Common attribute names can cause unexpected result in the output.</p>
<p>Please feel free to contact me on <a href="https://twitter.com/Shekharpatil95" target="_blank" rel="noopener noreferrer">twitter</a>.</p>]]></content>
        <author>
            <name>Shekhar Patil</name>
            <uri>https://github.com/shekhar-patil</uri>
        </author>
        <category label="Javascript" term="Javascript"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[How to use a Singleton method in the rails.]]></title>
        <id>https://shekhar-patil.github.io/blog/singleton-method-in-the-ruby</id>
        <link href="https://shekhar-patil.github.io/blog/singleton-method-in-the-ruby"/>
        <updated>2019-08-10T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[Today I attend Ruby Conference at Pune and Singleton method and metaclass in ruby was one of the talk discussed there So, I thought to write a blog about it.]]></summary>
        <content type="html"><![CDATA[<p>Today I attend Ruby Conference at Pune and Singleton method and metaclass in ruby was one of the talk discussed there So, I thought to write a blog about it.</p>
<p>In ruby, we create the class and class has many methods written into it. When we create an object of the class we can access those methods using that object. So, the question raise in my mind was as follows.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="1-who-holds-these-methods-does-class-hold-these-methods-or-each-object-of-the-class-holds-this-methods">1. Who holds these methods? does class hold these methods or each object of the class holds this methods?<a href="https://shekhar-patil.github.io/blog/singleton-method-in-the-ruby#1-who-holds-these-methods-does-class-hold-these-methods-or-each-object-of-the-class-holds-this-methods" class="hash-link" aria-label="Direct link to 1. Who holds these methods? does class hold these methods or each object of the class holds this methods?" title="Direct link to 1. Who holds these methods? does class hold these methods or each object of the class holds this methods?">​</a></h3>
<p>Let us find it out.</p>
<div class="language-ruby codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-ruby codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">class User</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  def role</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    puts "Admin"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  end</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">end</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">user = User.new</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">user.role         // Admin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">class User</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  def role</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    puts "sales"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  end</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">end</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">user.role         // sales</span><br></span></code></pre></div></div>
<p>As we can see we have overridden the <code>User</code> class that is why second <code>user.role</code> prints <code>sales</code>. It means all class methods are implemented in the class and also it is store in the class definitions.</p>
<p>Now consider the situation where we want to create method only for a single object of the class not for all objects of the class. We can do it in the ruby using singleton methods for the class object.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="2-singleton-methods">2. Singleton methods<a href="https://shekhar-patil.github.io/blog/singleton-method-in-the-ruby#2-singleton-methods" class="hash-link" aria-label="Direct link to 2. Singleton methods" title="Direct link to 2. Singleton methods">​</a></h2>
<p>Singleton methods are the methods which are only available for a single particular object and not for all objects of the class.</p>
<p>Check the following snippet</p>
<div class="language-ruby codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-ruby codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">class User</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  def role</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    puts "Admin"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  end</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">end</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">first_user = User.new      </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">first_user.role              // Admin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Add singleton method department for `first_user` object.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">def first_user.department</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  puts 'Admin department'</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">end</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">first_user.department        // Admin department</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">second_user = User.new</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">second_user.role             // Admin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">second_user.department       // NoMethodError (undefined method `department' for #&lt;User:0x000055a8b44b45d0&gt;)</span><br></span></code></pre></div></div>
<p>We can observe that department method is not available for object <code>second_user</code> because the department is singleton method for object <code>first_user</code> so it is stored on the metaclass of an object and they are independent of the parent class of the object.</p>
<p>So, Object in ruby only stores the state. Its behavior comes from the class definition. The metaclass is almost similar to a class but it can't be instantiated.</p>]]></content>
        <author>
            <name>Shekhar Patil</name>
            <uri>https://github.com/shekhar-patil</uri>
        </author>
        <category label="Rails" term="Rails"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Scope in rails.]]></title>
        <id>https://shekhar-patil.github.io/blog/scope-in-rails</id>
        <link href="https://shekhar-patil.github.io/blog/scope-in-rails"/>
        <updated>2019-06-13T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[Rails follow the DRY principle of software development and that is 'Don't Repeat Yourself'.]]></summary>
        <content type="html"><![CDATA[<p>Rails follow the DRY principle of software development and that is 'Don't Repeat Yourself'.
Scopes are great to keep our code DRY and well organized. It's just a set of pre-defined SQL queries that we can use to write complex queries.</p>
<p>Suppose we want to fetch users who have status <code>active</code>. So, we can simply write the following query</p>
<div class="language-ruby codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-ruby codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">def index</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  @active_users = User.where(status: "active")</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">end</span><br></span></code></pre></div></div>
<p>But we may need to re-use this code multiple times in our project. So instead of writing the same code, again and again, we can define a scope for it.</p>
<div class="language-ruby codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-ruby codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">class user &lt; ActiveRecord::Base</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  scope :active, -&gt; { where(status: "active") }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">end</span><br></span></code></pre></div></div>
<p>Now, we can simply use an active scope to fetch all active users as following:</p>
<div class="language-ruby codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-ruby codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">def index</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  @active_users = User.active</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">end</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="1-scope-with-parameter">1. Scope with parameter.<a href="https://shekhar-patil.github.io/blog/scope-in-rails#1-scope-with-parameter" class="hash-link" aria-label="Direct link to 1. Scope with parameter." title="Direct link to 1. Scope with parameter.">​</a></h2>
<p>we can give parameters to scope.</p>
<div class="language-ruby codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-ruby codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">class Fruit &lt; ActiveRecord::Base</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  scope :color, -&gt; (color_name){ where(color: color_name) }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">end</span><br></span></code></pre></div></div>
<p>now in our Fruit controller we can use</p>
<div class="language-ruby codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-ruby codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">def Index</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  @red_fruits = Fruit.color("red")</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  @yellow_fruits = Fruit.color("yellow")</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">end</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="2-scopes-are-chainable">2. Scopes Are Chainable<a href="https://shekhar-patil.github.io/blog/scope-in-rails#2-scopes-are-chainable" class="hash-link" aria-label="Direct link to 2. Scopes Are Chainable" title="Direct link to 2. Scopes Are Chainable">​</a></h2>
<p>This is really interesting and it makes scope even more useful.</p>
<div class="language-ruby codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-ruby codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">class User &lt; ApplicationRecord</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  scope :active, -&gt; { where(status: "active") }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  scope :recent, -&gt; { where('created_at &lt; ?', 1.week.ago }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">end</span><br></span></code></pre></div></div>
<p>we can use it in the controller as following;</p>
<div class="language-ruby codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-ruby codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">def index</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  @users = User.active.recent</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">end</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="3-how-exactly-scope-works-in-rails">3. How exactly scope works in rails<a href="https://shekhar-patil.github.io/blog/scope-in-rails#3-how-exactly-scope-works-in-rails" class="hash-link" aria-label="Direct link to 3. How exactly scope works in rails" title="Direct link to 3. How exactly scope works in rails">​</a></h2>
<p>look at the active scope once again</p>
<div class="language-ruby codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-ruby codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">class user &lt; ActiveRecord::Base</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  scope :active, -&gt; { where(status: "active") }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">end</span><br></span></code></pre></div></div>
<p>we can achieve the same result using the following class method as given. Basically, instead of writing class method scope is syntactical sugar for writing queries.</p>
<div class="language-ruby codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-ruby codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">def self.active</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  User.where(status: "active")</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">end</span><br></span></code></pre></div></div>
<p>I would love to hear some of the interesting topics related to rails which I can explore and write a blog about it on <a href="https://twitter.com/Shekharpatil95" target="_blank" rel="noopener noreferrer">Twitter</a>.</p>
<p>Cheers!</p>]]></content>
        <author>
            <name>Shekhar Patil</name>
            <uri>https://github.com/shekhar-patil</uri>
        </author>
        <category label="Rails" term="Rails"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Relational database.]]></title>
        <id>https://shekhar-patil.github.io/blog/relational-database</id>
        <link href="https://shekhar-patil.github.io/blog/relational-database"/>
        <updated>2019-05-16T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[In the internet era, every organization is storing large data and it is difficult to maintain this much data. There are different databases available but it is very difficult to select the best suitable for our requirement. Mainly databases are classified into Relational database and Non-relational database.]]></summary>
        <content type="html"><![CDATA[<p>In the internet era, every organization is storing large data and it is difficult to maintain this much data. There are different databases available but it is very difficult to select the best suitable for our requirement. Mainly databases are classified into Relational database and Non-relational database.</p>
<p><strong>Relational database:</strong> It is also called SQL(Structured Query Language) database and it is a set of data organized by tables, records and columns.</p>
<p>Ex: MySQL, MariaDB, and Postgres etc.</p>
<p><strong>Non-relational database:</strong> It is also called NoSQL(Non Structured Query Language) database. In NoSQL databases data is stored in documents and collections. What NoSQL databases gain in speed, flexibility, availability and partition tolerance, they lack in data consistency and most NoSQL stores can not handle <a href="https://en.wikipedia.org/wiki/ACID_(computer_science)" target="_blank" rel="noopener noreferrer">ACID transactions</a>.</p>
<p>Ex: MongoDB, Cassandra, and HBase.</p>
<p>Though there are many database options available today, Relational database is still best choice. New SQL and NoSQL have their place, but a relational database is still the solid choice.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="why-relational-database-is-still-best-choice">Why Relational database is still best choice?<a href="https://shekhar-patil.github.io/blog/relational-database#why-relational-database-is-still-best-choice" class="hash-link" aria-label="Direct link to Why Relational database is still best choice?" title="Direct link to Why Relational database is still best choice?">​</a></h3>
<p><strong>Ease of Use:</strong> The use of tables to store data in columns and rows makes it easy to access and manage data.</p>
<p><strong>Data Security:</strong> With an RDBMS you can hide sensitive tables and give them their authorization codes, providing a layer of protection for your data</p>
<p><strong>SQL Standard:</strong> SQL is a standardized language well understood by many applications, and many of the alternative database options provide SQL interfaces.</p>
<p><strong>Data Integrity:</strong> the structure of the relational database preserves the integrity of the data and makes it easier to meet compliance regulations.</p>
<p><strong>Performance:</strong>  An RDBMS uses indexes to sort data and speed up performance, and supports both desktop and web applications.</p>
<p><strong>Development and  Support:</strong> The large players — Oracle, Microsoft, SAP — have a vested interest in continuing to develop and evolve their database offering to meet modern standards.</p>
<p><strong>RDBMS Standards:</strong>  Relational databases adhere to ACID properties to ensure the reliability of transactions.</p>]]></content>
        <author>
            <name>Shekhar Patil</name>
            <uri>https://github.com/shekhar-patil</uri>
        </author>
        <category label="MySQL" term="MySQL"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Eager loading and N+1 query in rails.]]></title>
        <id>https://shekhar-patil.github.io/blog/eager-loading-and-N-plus-1-query</id>
        <link href="https://shekhar-patil.github.io/blog/eager-loading-and-N-plus-1-query"/>
        <updated>2019-05-10T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[Sometimes, the implementation of an algorithm can make performance worst. Then it does not matter whether it has used the faster programming language like C or slower like Ruby. So we should implement the algorithms properly. Same while dealing with the database we should use proper queries so that the performance should not affect.]]></summary>
        <content type="html"><![CDATA[<p>Sometimes, the implementation of an algorithm can make performance worst. Then it does not matter whether it has used the faster programming language like C or slower like Ruby. So we should implement the algorithms properly. Same while dealing with the database we should use proper queries so that the performance should not affect.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="lets-observe-an-example">Let's observe an example.<a href="https://shekhar-patil.github.io/blog/eager-loading-and-N-plus-1-query#lets-observe-an-example" class="hash-link" aria-label="Direct link to Let's observe an example." title="Direct link to Let's observe an example.">​</a></h3>
<div class="language-ruby codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-ruby codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">class College &lt; ApplicationRecord</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  has_many :students</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">end</span><br></span></code></pre></div></div>
<div class="language-ruby codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-ruby codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">class Student &lt; ApplicationRecord</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  belongs_to :college</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">end</span><br></span></code></pre></div></div>
<p>Now create some colleges and respective students.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="n1-query-in-rails">N+1 query in Rails<a href="https://shekhar-patil.github.io/blog/eager-loading-and-N-plus-1-query#n1-query-in-rails" class="hash-link" aria-label="Direct link to N+1 query in Rails" title="Direct link to N+1 query in Rails">​</a></h2>
<p>If we wanted to list the first ten students and their colleges, We could write the following code.</p>
<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">students </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Student</span><span class="token punctuation" style="color:#393A34">.</span><span class="token keyword" style="color:#00009f">limit</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">10</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">students</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">each </span><span class="token keyword" style="color:#00009f">do</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">student</span><span class="token operator" style="color:#393A34">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  puts </span><span class="token string" style="color:#e3116c">"#{student.college.name} build number #{student.name}"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">end</span><br></span></code></pre></div></div>
<p>The above code works, but it makes far too many independent database queries:</p>
<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Student </span><span class="token keyword" style="color:#00009f">Load</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">0.3</span><span class="token plain">ms</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"students"</span><span class="token punctuation" style="color:#393A34">.</span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"students"</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">LIMIT</span><span class="token plain"> ? </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">"LIMIT"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">10</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">College </span><span class="token keyword" style="color:#00009f">Load</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">0.2</span><span class="token plain">ms</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"colleges"</span><span class="token punctuation" style="color:#393A34">.</span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"colleges"</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">WHERE</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"colleges"</span><span class="token punctuation" style="color:#393A34">.</span><span class="token string" style="color:#e3116c">"id"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> ? </span><span class="token keyword" style="color:#00009f">LIMIT</span><span class="token plain"> ? </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">"id"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">"LIMIT"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">College </span><span class="token keyword" style="color:#00009f">Load</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">0.2</span><span class="token plain">ms</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"colleges"</span><span class="token punctuation" style="color:#393A34">.</span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"colleges"</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">WHERE</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"colleges"</span><span class="token punctuation" style="color:#393A34">.</span><span class="token string" style="color:#e3116c">"id"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> ? </span><span class="token keyword" style="color:#00009f">LIMIT</span><span class="token plain"> ? </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">"id"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">"LIMIT"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">College </span><span class="token keyword" style="color:#00009f">Load</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">0.2</span><span class="token plain">ms</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"colleges"</span><span class="token punctuation" style="color:#393A34">.</span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"colleges"</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">WHERE</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"colleges"</span><span class="token punctuation" style="color:#393A34">.</span><span class="token string" style="color:#e3116c">"id"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> ? </span><span class="token keyword" style="color:#00009f">LIMIT</span><span class="token plain"> ? </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">"id"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">"LIMIT"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">College </span><span class="token keyword" style="color:#00009f">Load</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">0.2</span><span class="token plain">ms</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"colleges"</span><span class="token punctuation" style="color:#393A34">.</span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"colleges"</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">WHERE</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"colleges"</span><span class="token punctuation" style="color:#393A34">.</span><span class="token string" style="color:#e3116c">"id"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> ? </span><span class="token keyword" style="color:#00009f">LIMIT</span><span class="token plain"> ? </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">"id"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">"LIMIT"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">College </span><span class="token keyword" style="color:#00009f">Load</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">0.2</span><span class="token plain">ms</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"colleges"</span><span class="token punctuation" style="color:#393A34">.</span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"colleges"</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">WHERE</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"colleges"</span><span class="token punctuation" style="color:#393A34">.</span><span class="token string" style="color:#e3116c">"id"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> ? </span><span class="token keyword" style="color:#00009f">LIMIT</span><span class="token plain"> ? </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">"id"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">"LIMIT"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">College </span><span class="token keyword" style="color:#00009f">Load</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">0.2</span><span class="token plain">ms</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"colleges"</span><span class="token punctuation" style="color:#393A34">.</span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"colleges"</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">WHERE</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"colleges"</span><span class="token punctuation" style="color:#393A34">.</span><span class="token string" style="color:#e3116c">"id"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> ? </span><span class="token keyword" style="color:#00009f">LIMIT</span><span class="token plain"> ? </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">"id"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">"LIMIT"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">College </span><span class="token keyword" style="color:#00009f">Load</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">0.2</span><span class="token plain">ms</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"colleges"</span><span class="token punctuation" style="color:#393A34">.</span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"colleges"</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">WHERE</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"colleges"</span><span class="token punctuation" style="color:#393A34">.</span><span class="token string" style="color:#e3116c">"id"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> ? </span><span class="token keyword" style="color:#00009f">LIMIT</span><span class="token plain"> ? </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">"id"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">"LIMIT"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">College </span><span class="token keyword" style="color:#00009f">Load</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">0.1</span><span class="token plain">ms</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"colleges"</span><span class="token punctuation" style="color:#393A34">.</span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"colleges"</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">WHERE</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"colleges"</span><span class="token punctuation" style="color:#393A34">.</span><span class="token string" style="color:#e3116c">"id"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> ? </span><span class="token keyword" style="color:#00009f">LIMIT</span><span class="token plain"> ? </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">"id"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">"LIMIT"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">College </span><span class="token keyword" style="color:#00009f">Load</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">0.2</span><span class="token plain">ms</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"colleges"</span><span class="token punctuation" style="color:#393A34">.</span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"colleges"</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">WHERE</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"colleges"</span><span class="token punctuation" style="color:#393A34">.</span><span class="token string" style="color:#e3116c">"id"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> ? </span><span class="token keyword" style="color:#00009f">LIMIT</span><span class="token plain"> ? </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">"id"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">"LIMIT"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">College </span><span class="token keyword" style="color:#00009f">Load</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">0.1</span><span class="token plain">ms</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"colleges"</span><span class="token punctuation" style="color:#393A34">.</span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"colleges"</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">WHERE</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"colleges"</span><span class="token punctuation" style="color:#393A34">.</span><span class="token string" style="color:#e3116c">"id"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> ? </span><span class="token keyword" style="color:#00009f">LIMIT</span><span class="token plain"> ? </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">"id"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">"LIMIT"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">]</span><br></span></code></pre></div></div>
<p>Currently, There are 11 independent queries to fetch 10 students. One query to fetch students and other N queries to fetch college in each iteration. hence the total number of queries is N+1. Now are fetching just 10 records but in the real-time scenario, the number of required records can be large. Suppose we want to fetch 10000 records then we'll need to connect database 10001 times and it will degrade the performance of the application heavily.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="eager-loading-in-rails">Eager loading in Rails<a href="https://shekhar-patil.github.io/blog/eager-loading-and-N-plus-1-query#eager-loading-in-rails" class="hash-link" aria-label="Direct link to Eager loading in Rails" title="Direct link to Eager loading in Rails">​</a></h2>
<p>To avoid the performance degradation of the previous example we need to reduce the number of independent queries to the database. In rails, this is done by eager loading associated relations. In the eager loading, we collect the required data with only one query.</p>
<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">students </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Student</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">includes</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">:college</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token keyword" style="color:#00009f">limit</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">10</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">students</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">each </span><span class="token keyword" style="color:#00009f">do</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">student</span><span class="token operator" style="color:#393A34">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  puts </span><span class="token string" style="color:#e3116c">"#{student.college.name} build number #{student.name}"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">end</span><br></span></code></pre></div></div>
<p>This time we'll use one query to fetch the students and another for fetching the associated colleges.</p>
<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Student </span><span class="token keyword" style="color:#00009f">Load</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">0.4</span><span class="token plain">ms</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"students"</span><span class="token punctuation" style="color:#393A34">.</span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"students"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">College </span><span class="token keyword" style="color:#00009f">Load</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">0.4</span><span class="token plain">ms</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"colleges"</span><span class="token punctuation" style="color:#393A34">.</span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"colleges"</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">WHERE</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"colleges"</span><span class="token punctuation" style="color:#393A34">.</span><span class="token string" style="color:#e3116c">"id"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">IN</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">?</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> ?</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> ?</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> ?</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">"id"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">"id"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">"id"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">"id"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">4</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">]</span><br></span></code></pre></div></div>
<p>Now, we'll required only two queries. Even though we wanted 10000 records only two queries are required to fetch the records from the database and it will improve the performance of our application.</p>
<p>For comparison, the time necessary to load and display 10 builds in my system is 2.1 milliseconds without eager loading and only 0.8 milliseconds with eager loading. This is s huge difference. Currently, In the case of a large number of record fetching, this time difference can be even far more.</p>
<p>I would love to hear some of your tips on dealing with N+1 queries on <a href="https://twitter.com/Shekharpatil95" target="_blank" rel="noopener noreferrer">twitter</a>.</p>
<p>Cheers!</p>]]></content>
        <author>
            <name>Shekhar Patil</name>
            <uri>https://github.com/shekhar-patil</uri>
        </author>
        <category label="Rails" term="Rails"/>
        <category label="Ruby" term="Ruby"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[First Blog Post]]></title>
        <id>https://shekhar-patil.github.io/blog/first-blog-post</id>
        <link href="https://shekhar-patil.github.io/blog/first-blog-post"/>
        <updated>2019-01-04T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[This is my first post, how exciting!!]]></summary>
        <content type="html"><![CDATA[<p>This is my first post, how exciting!!</p>]]></content>
        <author>
            <name>Shekhar Patil</name>
            <uri>https://github.com/shekhar-patil</uri>
        </author>
    </entry>
</feed>