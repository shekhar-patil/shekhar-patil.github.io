"use strict";(self.webpackChunkshekhar_patil_github_io=self.webpackChunkshekhar_patil_github_io||[]).push([[6692],{747:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>o,contentTitle:()=>l,default:()=>h,frontMatter:()=>r,metadata:()=>a,toc:()=>c});var a=n(1789),s=n(4848),i=n(8453);const r={slug:"rake-task-in-rails",title:"How to create and use Rake task in ruby and use it in the Rails?",authors:"shekhar-patil",tags:["rails","ruby"]},l="Introduction",o={authorsImageUrls:[void 0]},c=[{value:"How to define custom rake tasks in Rails?",id:"how-to-define-custom-rake-tasks-in-rails",level:2}];function d(e){const t={a:"a",code:"code",h1:"h1",h2:"h2",li:"li",p:"p",pre:"pre",ul:"ul",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.p,{children:"Sometimes, We need to have a task that can be executed at regular basic at some time. In ruby, we have a rake task to define and execute this task at any time.  We can use rake tasks in Rails for various purposes."}),"\n",(0,s.jsxs)(t.p,{children:["Rake is inspired by Linux ",(0,s.jsx)(t.a,{href:"https://en.wikipedia.org/wiki/Make_(software)",children:"make utility"}),". Its name comes from the ",(0,s.jsx)(t.code,{children:"Ruby Make"}),". Rake is a task management utility that reads and executes the tasks defined in the ruby language in the 'Rakefile`. It was written by the late ",(0,s.jsx)(t.a,{href:"https://en.wikipedia.org/wiki/Jim_Weirich",children:"Jim Weirich"}),"."]}),"\n",(0,s.jsx)(t.h1,{id:"how-to-create-a-rake-task",children:"How to create a Rake task."}),"\n",(0,s.jsxs)(t.p,{children:["Create a file with the name 'Rakefile' and write the following content in it.\n",(0,s.jsx)(t.code,{children:" $ touch Rakefile"})]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{children:"desc 'print hello world'\ntask :hello_world do\n  puts 'Hello world from Rubyist'\nend\n"})}),"\n",(0,s.jsxs)(t.p,{children:["Here ",(0,s.jsx)(t.code,{children:"desc"})," command defines the description of the task and ",(0,s.jsx)(t.code,{children:"task"}),' command defines the actual task that needs to be executed. Here we are defining a simple task which is printing "Hello world from Rubyist.".']}),"\n",(0,s.jsx)(t.p,{children:"If you are in the directory containing the Rakefile then you can execute the following commands:"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{children:"$ rake --task              This command will show all the tasks defined in the Rakefile along with its description.\n=> rake hello_world        # Print hello world\n"})}),"\n",(0,s.jsx)(t.p,{children:"Now we can execute the task using the following command"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{children:"$ rake hello_world\n=> Hello world from Rubyist\n"})}),"\n",(0,s.jsx)(t.p,{children:"We can also use namespace while defining the Rake task add the following code to Rakefile:"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{children:"desc 'Display files from the current directory'\nnamespace :admin do\n  task :display_files do\n    system('ls')\n  end\nend\n"})}),"\n",(0,s.jsx)(t.p,{children:"Let's see all tasks once again:"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{children:"$ rake --task\n=> rake admin:display_files  # Display files from the current directory\n   rake hello_world          # print hello world\n"})}),"\n",(0,s.jsx)(t.p,{children:"We can execute this task as follows:"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{children:"$ rake admin:hello_world\n(It should display files from your current directory)\n"})}),"\n",(0,s.jsx)(t.p,{children:"Namespacing to rake task is always good when the number of tasks is more and also it separates the context of the task."}),"\n",(0,s.jsx)(t.p,{children:"In the Rails project we can see many rake tasks as following:"}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsxs)(t.li,{children:["rails db",":migrate"]}),"\n",(0,s.jsx)(t.li,{children:"rails routes"}),"\n",(0,s.jsxs)(t.li,{children:["rake tmp",":clear"]}),"\n",(0,s.jsxs)(t.li,{children:["rake tmp",":create"]}),"\n"]}),"\n",(0,s.jsxs)(t.p,{children:["We can find out many more tasks by executing ",(0,s.jsx)(t.code,{children:"rake --task"})," command in the Rails application root directory."]}),"\n",(0,s.jsx)(t.h2,{id:"how-to-define-custom-rake-tasks-in-rails",children:"How to define custom rake tasks in Rails?"}),"\n",(0,s.jsxs)(t.p,{children:["We can create file with ",(0,s.jsx)(t.code,{children:".rake"})," extension in ",(0,s.jsx)(t.code,{children:"/lib/tasks/"})," folder."]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{children:"# lib/tasks/clear_logs.rake\n\nnamespace :Logs do\n  desc 'clear the log files'\n  task clear: :environment do\n    Dir[\"log/*.log\"].each do |file|\n       File.unlink(file)\n    end\n  end\nend\n"})}),"\n",(0,s.jsxs)(t.p,{children:["Above task is deleting all files from ",(0,s.jsx)(t.code,{children:"log directory"}),"."]}),"\n",(0,s.jsx)(t.p,{children:"Now we can simply execute this task as following:"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{children:"$ rake Logs:clear\n"})}),"\n",(0,s.jsxs)(t.p,{children:["I hope you loved it.\nPlease feel free to contact me on ",(0,s.jsx)(t.a,{href:"https://twitter.com/Shekharpatil95",children:"twitter"}),"."]})]})}function h(e={}){const{wrapper:t}={...(0,i.R)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},1789:e=>{e.exports=JSON.parse('{"permalink":"/blog/rake-task-in-rails","source":"@site/blog/2020-10-4-how-to-create-rake-task.md","title":"How to create and use Rake task in ruby and use it in the Rails?","description":"Sometimes, We need to have a task that can be executed at regular basic at some time. In ruby, we have a rake task to define and execute this task at any time.  We can use rake tasks in Rails for various purposes.","date":"2020-10-04T00:00:00.000Z","tags":[{"inline":false,"label":"Rails","permalink":"/blog/tags/rails","description":"Ruby on Rails is a server-side web application framework..."},{"inline":false,"label":"Ruby","permalink":"/blog/tags/ruby","description":"A dynamic, open source programming language with a focus on simplicity and productivity. It has an elegant syntax that is natural to read and easy to write."}],"readingTime":2.16,"hasTruncateMarker":true,"authors":[{"name":"Shekhar Patil","title":"Full stack developer.","url":"https://github.com/shekhar-patil","github":"shekhar-patil","linkedin":"https://www.linkedin.com/in/shekhar-patil-834462135/","imageURL":"https://avatars.githubusercontent.com/u/16961675?s=400&u=70e54719e239d1148c24bc8661a72ee9e59f420d&v=4","key":"shekhar-patil","page":null}],"frontMatter":{"slug":"rake-task-in-rails","title":"How to create and use Rake task in ruby and use it in the Rails?","authors":"shekhar-patil","tags":["rails","ruby"]},"unlisted":false,"prevItem":{"title":"Worker pool pattern in Golang","permalink":"/blog/worker-pool-pattern"},"nextItem":{"title":"Postgres users and their permission issue.","permalink":"/blog/postgres-permission-denied"}}')},8453:(e,t,n)=>{n.d(t,{R:()=>r,x:()=>l});var a=n(6540);const s={},i=a.createContext(s);function r(e){const t=a.useContext(i);return a.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function l(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:r(e.components),a.createElement(i.Provider,{value:t},e.children)}}}]);