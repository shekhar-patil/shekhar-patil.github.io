"use strict";(self.webpackChunkshekhar_patil_github_io=self.webpackChunkshekhar_patil_github_io||[]).push([[4242],{377:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>o,contentTitle:()=>l,default:()=>h,frontMatter:()=>i,metadata:()=>a,toc:()=>c});var a=s(2335),t=s(4848),r=s(8453);const i={slug:"scope-in-rails",title:"Scope in rails.",authors:"shekhar-patil",tags:["rails"]},l=void 0,o={authorsImageUrls:[void 0]},c=[{value:"1. Scope with parameter.",id:"1-scope-with-parameter",level:2},{value:"2. Scopes Are Chainable",id:"2-scopes-are-chainable",level:2},{value:"3. How exactly scope works in rails",id:"3-how-exactly-scope-works-in-rails",level:2}];function d(e){const n={a:"a",code:"code",h2:"h2",p:"p",pre:"pre",...(0,r.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.p,{children:"Rails follow the DRY principle of software development and that is 'Don't Repeat Yourself'.\nScopes are great to keep our code DRY and well organized. It's just a set of pre-defined SQL queries that we can use to write complex queries."}),"\n",(0,t.jsxs)(n.p,{children:["Suppose we want to fetch users who have status ",(0,t.jsx)(n.code,{children:"active"}),". So, we can simply write the following query"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-ruby",children:'\ndef index\n  @active_users = User.where(status: "active")\nend\n'})}),"\n",(0,t.jsx)(n.p,{children:"But we may need to re-use this code multiple times in our project. So instead of writing the same code, again and again, we can define a scope for it."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-ruby",children:'class user < ActiveRecord::Base\n  scope :active, -> { where(status: "active") }\nend\n'})}),"\n",(0,t.jsx)(n.p,{children:"Now, we can simply use an active scope to fetch all active users as following:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-ruby",children:"def index\n  @active_users = User.active\nend\n"})}),"\n",(0,t.jsx)(n.h2,{id:"1-scope-with-parameter",children:"1. Scope with parameter."}),"\n",(0,t.jsx)(n.p,{children:"we can give parameters to scope."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-ruby",children:"class Fruit < ActiveRecord::Base\n  scope :color, -> (color_name){ where(color: color_name) }\nend\n"})}),"\n",(0,t.jsx)(n.p,{children:"now in our Fruit controller we can use"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-ruby",children:'def Index\n  @red_fruits = Fruit.color("red")\n  @yellow_fruits = Fruit.color("yellow")\nend\n'})}),"\n",(0,t.jsx)(n.h2,{id:"2-scopes-are-chainable",children:"2. Scopes Are Chainable"}),"\n",(0,t.jsx)(n.p,{children:"This is really interesting and it makes scope even more useful."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-ruby",children:"class User < ApplicationRecord\n  scope :active, -> { where(status: \"active\") }\n  scope :recent, -> { where('created_at < ?', 1.week.ago }\nend\n"})}),"\n",(0,t.jsx)(n.p,{children:"we can use it in the controller as following;"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-ruby",children:"def index\n  @users = User.active.recent\nend\n"})}),"\n",(0,t.jsx)(n.h2,{id:"3-how-exactly-scope-works-in-rails",children:"3. How exactly scope works in rails"}),"\n",(0,t.jsx)(n.p,{children:"look at the active scope once again"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-ruby",children:'class user < ActiveRecord::Base\n  scope :active, -> { where(status: "active") }\nend\n'})}),"\n",(0,t.jsx)(n.p,{children:"we can achieve the same result using the following class method as given. Basically, instead of writing class method scope is syntactical sugar for writing queries."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-ruby",children:'\ndef self.active\n  User.where(status: "active")\nend\n'})}),"\n",(0,t.jsxs)(n.p,{children:["I would love to hear some of the interesting topics related to rails which I can explore and write a blog about it on ",(0,t.jsx)(n.a,{href:"https://twitter.com/Shekharpatil95",children:"Twitter"}),"."]}),"\n",(0,t.jsx)(n.p,{children:"Cheers!"})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},2335:e=>{e.exports=JSON.parse('{"permalink":"/blog/scope-in-rails","source":"@site/blog/2019-06-13-scope-in-rails.md","title":"Scope in rails.","description":"Rails follow the DRY principle of software development and that is \'Don\'t Repeat Yourself\'.","date":"2019-06-13T00:00:00.000Z","tags":[{"inline":false,"label":"Rails","permalink":"/blog/tags/rails","description":"Ruby on Rails is a server-side web application framework..."}],"readingTime":1.53,"hasTruncateMarker":true,"authors":[{"name":"Shekhar Patil","title":"Full stack developer.","url":"https://github.com/shekhar-patil","github":"shekhar-patil","linkedin":"https://www.linkedin.com/in/shekhar-patil-834462135/","imageURL":"https://avatars.githubusercontent.com/u/16961675?s=400&u=70e54719e239d1148c24bc8661a72ee9e59f420d&v=4","key":"shekhar-patil","page":null}],"frontMatter":{"slug":"scope-in-rails","title":"Scope in rails.","authors":"shekhar-patil","tags":["rails"]},"unlisted":false,"prevItem":{"title":"How to use a Singleton method in the rails.","permalink":"/blog/singleton-method-in-the-ruby"},"nextItem":{"title":"Relational database.","permalink":"/blog/relational-database"}}')},8453:(e,n,s)=>{s.d(n,{R:()=>i,x:()=>l});var a=s(6540);const t={},r=a.createContext(t);function i(e){const n=a.useContext(r);return a.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:i(e.components),a.createElement(r.Provider,{value:n},e.children)}}}]);